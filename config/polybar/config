;=====================================================
;
;   To learn more about how to configure Polybar
;   go to https://github.com/jaagr/polybar
;
;   The README contains alot of information
;
;=====================================================

[colors]

; {{{
primary = #2aa198
foreground = #fdf6e3
background = #002b36
; }}}

[bar/kmarc]
; {{{
height = 28
monitor = ${file:/tmp/polybar-monitor.txt:eDP1}
offset-x = 0
offset-y = 0
margin-left = 0
margin-right = 0
fixed-center = true
wm-restack = bspwm
override-redirect = true

dim-value = 0.90
foreground = ${colors.foreground}
background = ${colors.background}

line-size = 3
module-margin = 2

font-0 = "NotoSans:style=Bold:size=9"
font-1 = "MaterialIcons:size=14;4"
font-2 = "Weather Icons:style=Bold:size=12;2"

modules-left = bspwm xwindow
modules-center = weather date
modules-right = xkeyboard filesystem memory cpu battery temperature xbacklight volume dnd

scroll-up = bspwm-desknext
scroll-down = bspwm-deskprev

padding = 3

enable-ipc = true

tray-position = right

; }}}

[module/dnd]
; {{{
type = custom/ipc

initial = 1
hook-0 = [ "xtrue" == "x$(xfconf-query -c xfce4-notifyd -p /do-not-disturb)" ] && echo %{F#ff0000} || echo 
click-left = xfconf-query -c xfce4-notifyd -p /do-not-disturb -T && polybar-msg -p %pid% hook dnd 1
click-middle = xfce4-notifyd-config &
; }}}

[module/xwindow]
; {{{
type = internal/xwindow
label = %title:0:60:...%
format-prefix = %{O5}
format-prefix-foreground = ${colors.primary}
; }}}

[module/xkeyboard]
; {{{
type = internal/xkeyboard
blacklist-0 = num lock

format-prefix = 
format-prefix-foreground = ${colors.primary}

label-layout = %layout:4%

label-indicator-margin = 1
; }}}

[module/filesystem]
; {{{
type = internal/fs
interval = 25

mount-0 = /

format-mounted-prefix = %{A3:x-terminal-emulator -ls -e bash -ci 'dfc -f; read' &:} 
format-mounted-suffix = %{A}
label-mounted = %percentage_used:4%%
format-mounted-prefix-foreground = ${colors.primary}
; }}}

[module/bspwm]
; {{{
type = internal/bspwm

format = <label-monitor> <label-state> <label-mode>

label-monitor = 
label-monitor-foreground = ${colors.primary}

pin-workspaces = false

label-focused = %index%
label-focused-foreground = ${colors.primary}
label-focused-padding = 2

label-occupied = %index%
label-occupied-padding = 2
label-occupied-foreground = ${colors.foreground}

label-urgent = %index%
label-urgent-background = ${colors.primary}
label-urgent-foreground = ${colors.foreground}
label-urgent-padding = 2

label-empty = "%{O2}•%{O1}"
label-empty-foreground = ${colors.foreground}
label-empty-padding = 2
; }}}

[module/mpd]
; {{{
type = internal/mpd
format-online =  <toggle>   <label-song><icon-prev><icon-stop><icon-next>   <bar-progress>
format-stopped = %{O9}•%{O1}•%{O1}•%{O1}•%{O1}•%{O1}•%{O1}•%{O1}•%{O1}•%{O1}•%{O1}
format-stopped-foreground = ${colors.foreground}
format-paused-foreground = ${colors.foreground}
format-offline = ${self.format-stopped}
format-offline-foreground = ${colors.foreground}

icon-foreground = 
icon-play = 
icon-pause = 
icon-stop = 
icon-prev = 
icon-next = 
icon-seekb = 
icon-seekf = 
icon-random = 
icon-repeat = 
icon-repeatone = 
icon-play-foreground = ${colors.primary}
icon-pause-foreground = ${self.icon-play-foreground}
icon-stop-foreground = ${self.icon-play-foreground}
icon-next-foreground = ${self.icon-play-foreground}
icon-prev-foreground = ${self.icon-play-foreground}

bar-progress-width = 10
bar-progress-fill = •%{O1}
bar-progress-fill-foreground = ${colors.primary}
bar-progress-indicator = •%{O1}
bar-progress-empty = •%{O1}
bar-progress-empty-foreground = ${colors.foreground}

label-song = %title:0:20:...% ( %artist:0:20:...% )%{O8}

toggle-on-foreground = ${colors.foreground}
toggle-off-foreground = ${colors.foreground}
; }}}

[module/xbacklight]
; {{{
type = internal/xbacklight

format = <label>
label = %percentage:4%%
format-label-foreground = ${colors.foreground}

format-prefix = 
format-prefix-foreground = ${colors.primary}

format-suffix = %{A}%{A}
; }}}

[module/cpu]
; {{{
type = internal/cpu
interval = 2
format-prefix = %{A3:x-terminal-emulator -ls -e bash -ci 'htop' &:} 
format-prefix-foreground = ${colors.primary}
format-suffix = %{A}
label = %percentage:4:2%%

format = <label>
; }}}

[module/memory]
; {{{
type = internal/memory
interval = 2
format-prefix = 
format-prefix-foreground = ${colors.primary}
label = %percentage_used:4%%
; }}}

[module/date]
; {{{
type = internal/date
interval = 5

date-alt =
date = " %a  %B  %d •"

time-alt = %H:%M
time =   %H:%M

format-prefix = " "
format-prefix-foreground = ${colors.primary}

label = %date% %time%
; }}}

[module/weather]
; {{{
type = custom/script
exec = ~/bin/polybar-weather.sh
click-left = kill -HUP %pid%
click-middle = xdg-open https://openweathermap.org
tail = true
; }}}

[module/volume]
; {{{
type = internal/pulseaudio

format-volume =  <label-volume>

label-volume = %{A3:pavucontrol:}%percentage:4%%%{A}
label-volume-foreground = ${colors.foreground}
format-volume-prefix = %{A3:pavucontrol:}%{A}
format-volume-foreground = ${colors.primary}
label-muted = %percentage:4%%
label-muted-foreground = ${colors.foreground}
format-muted-prefix = 
format-muted-foreground = ${colors.primary}
; }}}

[module/battery]
; {{{
type = internal/battery
battery = BAT0
adapter = ACAD

click-middle = xfce4-power-manager-settings &

format-charging = <label-charging>
format-charging-prefix = %{O4}
format-charging-prefix-foreground = ${colors.primary}

format-discharging = <label-discharging>
format-discharging-prefix = %{A2:xfce4-power-manager-settings &:} %{O4}
format-discharging-prefix-foreground = ${colors.primary}
format-discharging-suffix = %{A}

format-full-prefix = %{O4}
format-full-prefix-foreground = ${colors.primary}
; }}}

[module/temperature]
; {{{
type = internal/temperature
thermal-zone = 0
warn-temperature = 60

format = <ramp> <label>
format-warn = <ramp> <label-warn>

label = %temperature-c%
label-warn = %temperature-c%
label-warn-foreground = ${colors.primary}

ramp-0 = "  "
; ramp-1 = "  "
; ramp-2 = "  "
ramp-foreground = ${colors.primary}
; }}}

[settings]
; {{{
screenchange-reload = true
;compositing-background = xor
;compositing-background = screen
;compositing-foreground = source
;compositing-border = over
; }}}

[global/wm]
; {{{
margin-top = 0
margin-bottom = 0
; }}}

; vim: fdm=marker fdl=0 fen ft=dosini
